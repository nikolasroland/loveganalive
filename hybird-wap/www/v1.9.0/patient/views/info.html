<ion-view view-title="个人基本信息">
    <ion-nav-buttons side="left">
        <button class="button button-clear icon" ng-class="{true :'ion-android-arrow-back', false: 'ion-ios-arrow-back'}[isAndroid]" ng-show="showHistoryBack" ng-click="historyBack()"></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
        <button class="button" ng-show="editState" ng-click="infoEdit()">修改</button>
        <button class="button" ng-show="cancelState" ng-click="cancelEdit()">取消</button>
    </ion-nav-buttons>
    <ion-content class="main">
        <form name="infoForm" class="form-style" class="list" method="post" novalidate>
            <div class="item item-text-wrap text-center patient-photo">
                <img ng-src="{{patient.avatar}}">
            </div>
            <label class="item item-input">
                <span class="input-label">用户ID</span>
                <input type="text" name="userid" ng-model="patient.userid" ng-disabled="true">
            </label>
            <label class="item item-input">
                <span class="input-label">昵称</span>
                <input type="text" name="nickname" ng-model="patient.nickname" required ng-disabled="editState">
            </label>
            <span class="error" ng-show="infoForm.nickname.$dirty && infoForm.nickname.$invalid">
                <i class="ion-alert-circled"></i> 请输入昵称</span>
            <label class="item item-input">
                <span class="input-label">头衔</span>
                <input type="text" name="header" ng-model="patient.header" ng-disabled="true">
            </label>
            <label class="item item-input">
                <span class="input-label">真实姓名</span>
                <input type="text" name="realname" ng-model="patient.realname" required ng-disabled="editState">
            </label>
            <span class="error" ng-show="infoForm.realname.$dirty && infoForm.realname.$invalid">
                <i class="ion-alert-circled"></i> 请输入真实姓名
            </span>
            <label class="item item-input">
                <span class="input-label">手机号</span>
                <input type="tel" name="telphone" ng-model="patient.telphone" ng-pattern="/^1[3-9]\d{9}$/" required ng-disabled="editState">
            </label>
            <span class="error" ng-show="infoForm.telphone.$dirty && infoForm.telphone.$invalid">
                <i class="ion-alert-circled"></i> 
                <span ng-show="infoForm.telphone.$error.required">请输入手机号</span>
            <span ng-show="infoForm.telphone.$error.pattern">请输入正确的手机号</span>
            </span>
            <label class="item item-input item-input-inset">
                <span class="input-label">性别</span>
                <label class="item item-radio">
                    <input type="radio" name="sex" value="1" ng-model="patient.sex" required ng-disabled="editState">
                    <i class="radio-icon ion-checkmark"></i>
                    <div class="item-content">
                        男
                    </div>
                </label>
                <label class="item item-radio">
                    <input type="radio" name="sex" value="2" ng-model="patient.sex" required ng-disabled="editState">
                    <i class="radio-icon ion-checkmark"></i>
                    <div class="item-content">
                        女
                    </div>
                </label>
            </label>
            <label class="item item-input">
                <span class="input-label">生日</span>
                <input type="date" name="birthday" ng-model="patient.birthday" format-date max="{{maxDate | date : 'yyyy-MM-dd'}}" required ng-disabled="editState">
            </label>
            <span class="error" ng-show="infoForm.birthday.$dirty && infoForm.birthday.$invalid && !editState"><i class="ion-alert-circled"></i> 生日不能晚于今天</span>

            <label class="item item-input item-input-inset">
                <span class="input-label">是否自费</span>
                <label class="item item-radio">
                    <input type="radio" name="is_own" value="1" ng-model="patient.is_own" required ng-disabled="editState">
                    <i class="radio-icon ion-checkmark"></i>
                    <div class="item-content">
                        是
                    </div>
                </label>
                <label class="item item-radio">
                    <input type="radio" name="is_own" value="0" ng-model="patient.is_own" required ng-disabled="editState">
                    <i class="radio-icon ion-checkmark"></i>
                    <div class="item-content">
                        否
                    </div>
                </label>
            </label>

            <label class="item item-input item-select">
                <div class="input-label">
                    疾病
                </div>
                <select name="disease" ng-model="patient.disease" required ng-disabled="editState">
                    <option value="乙肝">乙肝</option>
                    <option value="丙肝">丙肝</option>
                    <option value="脂肪肝">脂肪肝</option>
                    <option value="肝硬化">肝硬化</option>
                    <option value="新生儿">新生儿</option>
                    <option value="准妈妈">准妈妈</option>
                </select>
            </label>
            <span class="error" ng-show="infoForm.disease.$dirty && infoForm.disease.$invalid">
                <i class="ion-alert-circled"></i> 请选择疾病
            </span>
            <button type="submit" ng-show="editButton" ng-disabled="infoForm.$invalid" ng-click="updateUser(patient.nickname, patient.sex, patient.birthday, patient.is_own, patient.disease, patient.realname, patient.telphone)" class="button button-block button-positive">确定</button>
        </form>
    </ion-content>
</ion-view>
